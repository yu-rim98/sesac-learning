# 변수 스코프(Scope) 정리

> 변수 스코프란, 특정 변수에 접근할 수 있는 유효 범위를 의미한다.
> 스코프는 실행 컨텍스트와 콜 스택의 구조를 이해하면 파악하기 쉽다.

## 실행 컨텍스트(Execution Context)와 콜 스택(Call Stack)

- 코드를 실행할 때 **실행 컨텍스트** 라는 작업 환경 (상자)을 생성한다.
- 실행 중인 컨텍스트들은 콜 스택(Call Stack) 구조로 관리된다. (후입선출 - LIFO)

1. 전역 실행 컨텍스트

- 코드가 처음 실행되면, 가장 먼저 **전역 실행 컨텍스트**가 콜 스택에 쌓인다.
- 전역에서 선언된 변수들은 해당 전역 컨텍스트에 저장되며 프로그램이 종료될 때까지 사라지지 않는다.

2. 함수 실행 컨텍스트

- 함수나 코드 블럭이 실행되면, 해당 코드 블럭만을 위한 새로운 **실행 컨텍스트** 가 생성되어 콜 스택 위에 쌓인다.
- 해당 블럭 내에서 선언된 변수들은 해당 컨텍스트에 저장된다.

```javascript
function foo() {
  let x = 10; // foo 컨텍스트에 저장
}
```

## 스코프(Scope)의 동작 방식

### 코드 블럭 안에서 외부를 볼 수 있는 이유 (스코프 체인)

- 변수에 접근할 때 **현재 실행 컨텍스트 -> 아래 컨텍스트(부모)** 순으로 탐색한다.
- 이를 **스코프 체인(Scope Chain)** 이라고 한다.

```javascript
let a = 1;
function outer() {
  function inner() {
    console.log(a); // 스코프 체인을 통해 전역 변수 a에 접근
  }
  inner();
}
```

---

### 외부에서 코드 블럭 내부를 볼 수 없는 이유

- 함수의 실행이 끝나면 해당 함수의 실행 컨텍스트는 콜 스택에서 제거된다.
- 이때 해당 컨텍스트 안에 저장된 지역 변수들도 함께 사라진다.
- 따라서 외부에서 해당 변수에 접근할 수 없다.

```javascript
function foo() {
  let x = 100;
}

console.log(x); // ReferenceError: x is not defined
```
