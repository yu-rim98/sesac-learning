# 자바스크립트의 `this`와 객체지향(OOP)

## 객체지향 프로그래밍(OOP) 기본 개념

- **객체(Object)** : `상태(state)`와 `행동(behavior)`을 가지는 *독립적인 주체*이다.
  - 상태는 **속성(property)**으로,
  - 행동은 **메서드(method)**로 표현된다.
- 객체의 메서드는 자신의 상태에 접근하고 조작할 수 있어야 한다. (외부에서 조작하면 안됨)
- 이를 위해 자기 자신을 참조할 수 있는 키워드(`this`, `self`등)가 필요하다.
  > 즉, **객체는 스스로 자신의 상태와 행동을 인식하고 조작할 수 있어야 한다**는 철학이 객체지향의 핵심이다.

## 자바스크립트에서의 `this`

- `this`는 함수 또는 메서드 내에서 해당 코드를 실행하는 주체(객체)를 가리킨다.
- 자바스크립트의 `this`는 **객체지향에서 말하는 자기 참조 개념**과 맞닿아 있다.
  > 메서드 안에서 `this`를 사용하면, 해당 메서드를 소유한 **객체 자신의 속성에 접근**할 수 있다.

## 일반 함수와 화살표 함수의 `this`차이

| 구분             |                 일반 함수                  |                                             화살표 함수 |
| :--------------- | :----------------------------------------: | ------------------------------------------------------: |
| `this` 결정 시점 |           호출 시점에 결정된다.            |                   선언 시점에 상위 스코프에서 결정된다. |
| 바인딩 방식      |  호출한 객체에 따라 동적으로 바인딩된다.   |                        상위 스코프의 `this`를 계승한다. |
| 사용 사례        | 객체의 메서드 정의 등 `this`가 필요한 경우 | 콜백 함수, 내부 함수에서 상위 `this`를 유지해야 할 경우 |

### 예시

> 화살표 함수의 this - 객체를 가리키지 않는다.
>
> ```javascript
> const user = {
>   name: "홍길동",
>   greet: () => {
>     console.log(this); // 전역 객체 (브라우저: window / Node.js: global)
>   },
> };
>
> user.greet(); // {} (node 환경에서 실행)
> ```

> 일반 함수의 this - 객체를 가리킨다.
>
> ```javascript
> const user = {
>   name: "홍길동",
>   greet: function () {
>     console.log(this.name); // 홍길동
>   },
> };
>
> user.greet(); // 호출 시 호출하는 user 객체가 this에 바인딩
> ```

> 화살표 함수가 내부 함수로 쓰일 경우 - 상위 스코프 this 계승
>
> ```javascript
> const user = {
>   name: "홍길동",
>   greet: function () {
>     const inner = () => {
>       console.log(this.name); // 홍길동
>     };
>
>     inner();
>   },
> };
>
> // 호출 시 호출하는 user 객체가 this에 바인딩
> // 화살표 함수에 물려짐
> user.greet();
> ```

## 요약 정리

1. `this`는 객체가 자기 자신의 속성과 메서드를 참조하게 도와주는 키워드
2. 일반 함수의 `this`는 함수가 호출될 때 호출하는 객체가 바인딩
3. 화살표 함수의 `this`는 선언될 때 상위 스코프의 this를 계승
4. 자바스크립트의 `this`는 **객체지향(OOP)의 자기 참조 개념**을 구현하는 도구
