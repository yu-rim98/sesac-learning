<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}"
>

<div layout:fragment="content">

  <div class="mb-3">
    <span class="badge bg-success">전체: <span th:text="${todos.size()}"></span></span>
    <span class="badge bg-success">완료: <span th:text="${completedCount}"></span></span>
    <span class="badge bg-warning">진행중: <span th:text="${pendingCount}"></span></span>
  </div>

  <div class="mb-3">
    <form th:action="@{/todos/completed}" method="post">
      <button type="submit" class="btn btn-danger">완료된 Todo 일괄 삭제</button>
    </form>
  </div>

  <table class="table table-striped">
    <thead>
      <th>ID</th>
      <th>Title</th>
      <th>Completed</th>
      <th>Detail</th>
    </thead>
    <tbody>
      <tr th:each="todo : ${todos}">
        <td th:text="${todo.id}"></td>
        <td th:text="${todo.title}"></td>
        <td>
          <span th:if="${todo.completed}" class="badge bg-success">완료</span>
          <span th:unless="${todo.completed}" class="badge bg-warning">진행중</span>
        </td>
        <td>
          <a th:href="@{/todos/{id}(id=${todo.id})}" class="btn btn-sm btn-primary">detail</a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

